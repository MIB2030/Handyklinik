import{s as r,j as e}from"./index-ww1MoWu0.js";import{r as d}from"./react-vendor-CyQtAcHN.js";import{_ as q,Z as H,Q as R,i as P,z as $,u as G,$ as K,a0 as O,N as W}from"./icons-D7vnYvoJ.js";import"./supabase-BIynZPkb.js";function X(){const[x,C]=d.useState([]),[o,b]=d.useState(null),[s,i]=d.useState(null),[E,j]=d.useState(!0),[v,_]=d.useState(!1),[y,N]=d.useState(!1),[a,c]=d.useState({image_url:"",alt_text:"",is_active:!0,duration_seconds:5}),[w,S]=d.useState(!1);d.useEffect(()=>{h(),T(),U()},[]);const h=async()=>{j(!0);const{data:t,error:l}=await r.from("hero_slides").select("*").order("display_order",{ascending:!0});l?console.error("Error loading slides:",l):C(t||[]),j(!1)},T=async()=>{const{data:t,error:l}=await r.from("hero_slideshow_settings").select("*").maybeSingle();l?console.error("Error loading settings:",l):b(t)},U=async()=>{const{data:t,error:l}=await r.from("hero_text_settings").select("*").maybeSingle();l?console.error("Error loading text settings:",l):i(t)},z=async t=>{var g;const l=(g=t.target.files)==null?void 0:g[0];if(!l)return;S(!0);const n=l.name.split(".").pop(),p=`hero-slides/${`${Math.random()}.${n}`}`;try{const{data:u,error:F}=await r.storage.from("hero-images").upload(p,l);if(F){const{data:{publicUrl:f}}=r.storage.from("hero-images").getPublicUrl(p);c({...a,image_url:f})}else if(u){const{data:{publicUrl:f}}=r.storage.from("hero-images").getPublicUrl(u.path);c({...a,image_url:f})}}catch(u){console.error("Error uploading image:",u),alert("Fehler beim Hochladen des Bildes")}finally{S(!1)}},M=async()=>{if(!a.image_url){alert("Bitte Bild-URL eingeben");return}const t=Math.max(...x.map(n=>n.display_order),0),{error:l}=await r.from("hero_slides").insert({image_url:a.image_url,alt_text:a.alt_text||"Smartphone Reparatur",display_order:t+1,is_active:a.is_active??!0,duration_seconds:a.duration_seconds||5});l?(console.error("Error adding slide:",l),alert("Fehler beim Hinzufügen des Slides")):(c({image_url:"",alt_text:"",is_active:!0,duration_seconds:5}),h())},I=async t=>{if(!confirm("Slide wirklich löschen?"))return;const{error:l}=await r.from("hero_slides").delete().eq("id",t);l?(console.error("Error deleting slide:",l),alert("Fehler beim Löschen des Slides")):h()},L=async t=>{const{error:l}=await r.from("hero_slides").update({is_active:!t.is_active}).eq("id",t.id);l?console.error("Error updating slide:",l):h()},A=async(t,l)=>{const n=Math.max(1,Math.min(30,l)),{error:m}=await r.from("hero_slides").update({duration_seconds:n}).eq("id",t);m?console.error("Error updating duration:",m):h()},k=async(t,l)=>{const n=x.findIndex(u=>u.id===t.id);if(l==="up"&&n===0||l==="down"&&n===x.length-1)return;const m=l==="up"?n-1:n+1,p=x[m],g=[r.from("hero_slides").update({display_order:p.display_order}).eq("id",t.id),r.from("hero_slides").update({display_order:t.display_order}).eq("id",p.id)];await Promise.all(g),h()},B=async()=>{if(!o)return;const{error:t}=await r.from("hero_slideshow_settings").update({auto_play:o.auto_play,transition_duration:o.transition_duration}).eq("id",o.id);t?(console.error("Error updating settings:",t),alert("Fehler beim Speichern der Einstellungen")):(alert("Einstellungen gespeichert"),_(!1))},D=async()=>{if(!s)return;const{error:t}=await r.from("hero_text_settings").update({title_text:s.title_text,subtitle_text:s.subtitle_text,title_font_size:s.title_font_size,subtitle_font_size:s.subtitle_font_size,title_color:s.title_color,subtitle_color:s.subtitle_color,title_font_weight:s.title_font_weight,subtitle_font_weight:s.subtitle_font_weight,text_shadow:s.text_shadow,overlay_opacity:s.overlay_opacity}).eq("id",s.id);t?(console.error("Error updating text settings:",t),alert("Fehler beim Speichern der Text-Einstellungen")):(alert("Text-Einstellungen gespeichert"),N(!1))};return E?e.jsx("div",{className:"p-8",children:"Lädt..."}):e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Hero Slideshow"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>N(!y),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(q,{className:"w-5 h-5"}),"Text & Design"]}),e.jsxs("button",{onClick:()=>_(!v),className:"flex items-center gap-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:[e.jsx(H,{className:"w-5 h-5"}),"Slideshow"]})]})]}),y&&s&&e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Text & Design Einstellungen"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg border-b pb-2",children:"Textinhalt"}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2",children:"Haupttitel:"}),e.jsx("input",{type:"text",value:s.title_text,onChange:t=>i({...s,title_text:t.target.value}),className:"w-full px-3 py-2 border rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2",children:"Untertitel:"}),e.jsx("textarea",{value:s.subtitle_text,onChange:t=>i({...s,subtitle_text:t.target.value}),rows:3,className:"w-full px-3 py-2 border rounded-lg"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg border-b pb-2",children:"Farben"}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2",children:"Titelfarbe:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:s.title_color,onChange:t=>i({...s,title_color:t.target.value}),className:"w-16 h-10 border rounded cursor-pointer"}),e.jsx("input",{type:"text",value:s.title_color,onChange:t=>i({...s,title_color:t.target.value}),className:"flex-1 px-3 py-2 border rounded-lg",placeholder:"#ffffff"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2",children:"Untertitelfarbe:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:s.subtitle_color,onChange:t=>i({...s,subtitle_color:t.target.value}),className:"w-16 h-10 border rounded cursor-pointer"}),e.jsx("input",{type:"text",value:s.subtitle_color,onChange:t=>i({...s,subtitle_color:t.target.value}),className:"flex-1 px-3 py-2 border rounded-lg",placeholder:"#ffffff"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg border-b pb-2",children:"Schriftgröße"}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2",children:"Titelgröße:"}),e.jsxs("select",{value:s.title_font_size,onChange:t=>i({...s,title_font_size:t.target.value}),className:"w-full px-3 py-2 border rounded-lg",children:[e.jsx("option",{value:"text-2xl sm:text-3xl md:text-5xl",children:"Klein"}),e.jsx("option",{value:"text-3xl sm:text-4xl md:text-6xl",children:"Mittel"}),e.jsx("option",{value:"text-4xl sm:text-5xl md:text-7xl",children:"Groß"}),e.jsx("option",{value:"text-5xl sm:text-6xl md:text-8xl",children:"Sehr Groß"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2",children:"Untertitelgröße:"}),e.jsxs("select",{value:s.subtitle_font_size,onChange:t=>i({...s,subtitle_font_size:t.target.value}),className:"w-full px-3 py-2 border rounded-lg",children:[e.jsx("option",{value:"text-base sm:text-lg md:text-xl",children:"Klein"}),e.jsx("option",{value:"text-lg sm:text-xl md:text-2xl",children:"Mittel"}),e.jsx("option",{value:"text-xl sm:text-2xl md:text-3xl",children:"Groß"}),e.jsx("option",{value:"text-2xl sm:text-3xl md:text-4xl",children:"Sehr Groß"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg border-b pb-2",children:"Schriftstärke"}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2",children:"Titel Schriftstärke:"}),e.jsxs("select",{value:s.title_font_weight,onChange:t=>i({...s,title_font_weight:t.target.value}),className:"w-full px-3 py-2 border rounded-lg",children:[e.jsx("option",{value:"font-light",children:"Leicht"}),e.jsx("option",{value:"font-normal",children:"Normal"}),e.jsx("option",{value:"font-medium",children:"Medium"}),e.jsx("option",{value:"font-semibold",children:"Halbbold"}),e.jsx("option",{value:"font-bold",children:"Bold"}),e.jsx("option",{value:"font-extrabold",children:"Extra Bold"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2",children:"Untertitel Schriftstärke:"}),e.jsxs("select",{value:s.subtitle_font_weight,onChange:t=>i({...s,subtitle_font_weight:t.target.value}),className:"w-full px-3 py-2 border rounded-lg",children:[e.jsx("option",{value:"font-light",children:"Leicht"}),e.jsx("option",{value:"font-normal",children:"Normal"}),e.jsx("option",{value:"font-medium",children:"Medium"}),e.jsx("option",{value:"font-semibold",children:"Halbbold"}),e.jsx("option",{value:"font-bold",children:"Bold"}),e.jsx("option",{value:"font-extrabold",children:"Extra Bold"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg border-b pb-2",children:"Effekte"}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2",children:"Textschatten:"}),e.jsxs("select",{value:s.text_shadow,onChange:t=>i({...s,text_shadow:t.target.value}),className:"w-full px-3 py-2 border rounded-lg",children:[e.jsx("option",{value:"",children:"Kein Schatten"}),e.jsx("option",{value:"drop-shadow",children:"Leicht"}),e.jsx("option",{value:"drop-shadow-lg",children:"Mittel"}),e.jsx("option",{value:"drop-shadow-xl",children:"Stark"}),e.jsx("option",{value:"drop-shadow-2xl",children:"Sehr Stark"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block font-medium mb-2",children:["Overlay-Dunkelheit: ",s.overlay_opacity,"%"]}),e.jsx("input",{type:"range",min:"0",max:"80",value:s.overlay_opacity,onChange:t=>i({...s,overlay_opacity:parseInt(t.target.value)}),className:"w-full"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Dunkles Overlay über dem Bild für bessere Lesbarkeit"})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsx("button",{onClick:D,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Text-Einstellungen speichern"})})]})]}),v&&o&&e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Slideshow Einstellungen"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"auto_play",checked:o.auto_play,onChange:t=>b({...o,auto_play:t.target.checked}),className:"w-5 h-5"}),e.jsx("label",{htmlFor:"auto_play",className:"font-medium",children:"Automatischer Wechsel aktiviert"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2",children:"Wechselzeit (Sekunden):"}),e.jsx("input",{type:"number",min:"3",max:"60",value:o.transition_duration,onChange:t=>b({...o,transition_duration:parseInt(t.target.value)||20}),className:"w-32 px-3 py-2 border rounded-lg"})]}),e.jsx("button",{onClick:B,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Einstellungen speichern"})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Neues Slide hinzufügen"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2",children:"Bild-URL:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:a.image_url||"",onChange:t=>c({...a,image_url:t.target.value}),placeholder:"/pfad/zum/bild.jpg",className:"flex-1 px-3 py-2 border rounded-lg"}),e.jsxs("label",{className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 cursor-pointer flex items-center gap-2",children:[e.jsx(R,{className:"w-5 h-5"}),w?"Lädt...":"Upload",e.jsx("input",{type:"file",accept:"image/*",onChange:z,className:"hidden",disabled:w})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2",children:"Alt-Text:"}),e.jsx("input",{type:"text",value:a.alt_text||"",onChange:t=>c({...a,alt_text:t.target.value}),placeholder:"Smartphone Reparatur",className:"w-full px-3 py-2 border rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block font-medium mb-2 flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4"}),"Anzeigedauer (Sekunden):"]}),e.jsx("input",{type:"number",min:"1",max:"30",value:a.duration_seconds||5,onChange:t=>c({...a,duration_seconds:parseInt(t.target.value)||5}),className:"w-32 px-3 py-2 border rounded-lg"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Wie lange soll dieses Slide angezeigt werden? (1-30 Sekunden)"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:a.is_active??!0,onChange:t=>c({...a,is_active:t.target.checked}),className:"w-5 h-5"}),e.jsx("label",{htmlFor:"is_active",className:"font-medium",children:"Aktiv"})]}),e.jsxs("button",{onClick:M,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx($,{className:"w-5 h-5"}),"Slide hinzufügen"]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Vorschau"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Alt-Text"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Dauer (Sek.)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Reihenfolge"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Aktionen"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:x.map((t,l)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4",children:t.image_url?e.jsx("img",{src:t.image_url,alt:t.alt_text,className:"w-32 h-20 object-cover rounded"}):e.jsx("div",{className:"w-32 h-20 bg-gray-200 rounded flex items-center justify-center",children:e.jsx(G,{className:"w-8 h-8 text-gray-400"})})}),e.jsx("td",{className:"px-6 py-4",children:t.alt_text}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"number",min:"1",max:"30",value:t.duration_seconds,onChange:n=>A(t.id,parseInt(n.target.value)||5),className:"w-20 px-2 py-1 border rounded text-center"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>L(t),className:`px-3 py-1 rounded-full text-sm font-medium ${t.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.is_active?"Aktiv":"Inaktiv"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>k(t,"up"),disabled:l===0,className:"p-1 hover:bg-gray-100 rounded disabled:opacity-30",children:e.jsx(K,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>k(t,"down"),disabled:l===x.length-1,className:"p-1 hover:bg-gray-100 rounded disabled:opacity-30",children:e.jsx(O,{className:"w-5 h-5"})})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>I(t.id),className:"p-2 text-red-600 hover:bg-red-50 rounded",children:e.jsx(W,{className:"w-5 h-5"})})})]},t.id))})]})})]})}export{X as default};
