import{s as u,j as e}from"./index-ww1MoWu0.js";import{r as t}from"./react-vendor-CyQtAcHN.js";import{p as m,y as f}from"./icons-D7vnYvoJ.js";import"./supabase-BIynZPkb.js";function N(){const[s,o]=t.useState(null),[g,p]=t.useState(!0),[i,d]=t.useState(!1),[c,n]=t.useState("");t.useEffect(()=>{x()},[]);const x=async()=>{const{data:a,error:l}=await u.from("company_info").select("*").maybeSingle();!l&&a&&o(a),p(!1)},r=(a,l)=>{s&&o({...s,[a]:l})},b=async()=>{if(!s)return;d(!0),n("");const{error:a}=await u.from("company_info").update({company_name:s.company_name,street:s.street,postal_code:s.postal_code,city:s.city,phone:s.phone,mobile:s.mobile,email:s.email,opening_hours:s.opening_hours,whatsapp:s.whatsapp,instagram:s.instagram,facebook:s.facebook,google_maps_url:s.google_maps_url,updated_at:new Date().toISOString()}).eq("id",s.id);d(!1),a?n("Fehler beim Speichern"):(n("Erfolgreich gespeichert"),setTimeout(()=>n(""),3e3))};return g?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(m,{className:"h-8 w-8 animate-spin text-blue-600"})}):s?e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"MNW Daten"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Verwalten Sie die Kontaktdaten Ihres Unternehmens"})]}),c&&e.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg text-green-800",children:c}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 max-w-3xl",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Firmenname"}),e.jsx("input",{type:"text",value:s.company_name,onChange:a=>r("company_name",a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Straße & Hausnummer"}),e.jsx("input",{type:"text",value:s.street,onChange:a=>r("street",a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"PLZ"}),e.jsx("input",{type:"text",value:s.postal_code,onChange:a=>r("postal_code",a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stadt"}),e.jsx("input",{type:"text",value:s.city,onChange:a=>r("city",a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefon"}),e.jsx("input",{type:"text",value:s.phone,onChange:a=>r("phone",a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mobilnummer"}),e.jsx("input",{type:"text",value:s.mobile,onChange:a=>r("mobile",a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-Mail"}),e.jsx("input",{type:"email",value:s.email,onChange:a=>r("email",a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Öffnungszeiten"}),e.jsx("textarea",{value:s.opening_hours,onChange:a=>r("opening_hours",a.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"WhatsApp"}),e.jsx("input",{type:"text",value:s.whatsapp,onChange:a=>r("whatsapp",a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instagram"}),e.jsx("input",{type:"text",value:s.instagram,onChange:a=>r("instagram",a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Facebook URL"}),e.jsx("input",{type:"text",value:s.facebook,onChange:a=>r("facebook",a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Google Maps URL"}),e.jsx("input",{type:"text",value:s.google_maps_url,onChange:a=>r("google_maps_url",a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{onClick:b,disabled:i,className:"flex items-center space-x-2 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400",children:i?e.jsxs(e.Fragment,{children:[e.jsx(m,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Speichern..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx("span",{children:"Speichern"})]})})})]})})]}):e.jsx("div",{className:"text-center py-8",children:"Keine Firmendaten gefunden"})}export{N as default};
