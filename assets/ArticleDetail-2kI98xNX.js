import{s as h,j as e,V as n,H as x,F as d,a as y}from"./index-CThAeKwj.js";import{u as w,r as a,L as r}from"./react-vendor-CyQtAcHN.js";import{s as u,a as v,g as _,T as k}from"./icons-CZgF3DbW.js";import"./supabase-BIynZPkb.js";const S={blog:"Blog",news:"News",produkt:"Produkt",ratgeber:"Ratgeber",service:"Service"};function E(){const{slug:i}=w(),[s,g]=a.useState(null),[m,p]=a.useState([]),[j,o]=a.useState(!0),[b,c]=a.useState(!1);a.useEffect(()=>{i&&N()},[i]);const N=async()=>{try{o(!0),c(!1);const{data:t,error:l}=await h.from("articles").select("*").eq("slug",i).eq("status","published").maybeSingle();if(l)throw l;if(!t){c(!0);return}g(t);const{data:f}=await h.from("articles").select("id, title, slug, excerpt, image_url, category, price, published_at").eq("status","published").eq("category",t.category).neq("id",t.id).order("published_at",{ascending:!1}).limit(3);p(f||[])}catch(t){console.error("Fehler beim Laden des Artikels:",t),c(!0)}finally{o(!1)}};return j?e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx(n,{}),e.jsx(x,{}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-20 text-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"})}),e.jsx(d,{})]}):b||!s?e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx(n,{}),e.jsx(x,{}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-20 text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Artikel nicht gefunden"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Der gesuchte Artikel existiert nicht oder wurde entfernt."}),e.jsxs(r,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:[e.jsx(u,{className:"w-5 h-5"}),"Zur Startseite"]})]}),e.jsx(d,{})]}):e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsxs(y,{children:[e.jsx("title",{children:s.meta_title||s.title}),e.jsx("meta",{name:"description",content:s.meta_description||s.excerpt})]}),e.jsx(n,{}),e.jsx(x,{}),e.jsx("nav",{className:"bg-gray-50 border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(r,{to:"/",className:"hover:text-blue-600",children:"Startseite"}),e.jsx(v,{className:"w-4 h-4"}),e.jsx("span",{className:"text-gray-900",children:s.title})]})})}),e.jsxs("article",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[s.image_url&&e.jsx("div",{className:"mb-8 rounded-2xl overflow-hidden shadow-lg",children:e.jsx("img",{src:s.image_url,alt:s.title,className:"w-full h-96 object-cover"})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("span",{className:"px-4 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-semibold",children:S[s.category]||s.category}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(_,{className:"w-4 h-4"}),e.jsx("time",{dateTime:s.published_at,children:new Date(s.published_at).toLocaleDateString("de-DE",{day:"2-digit",month:"long",year:"numeric"})})]}),s.price&&s.price>0&&e.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[e.jsx(k,{className:"w-5 h-5 text-blue-600"}),e.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:[s.price.toFixed(2)," €"]})]})]}),e.jsx("h1",{className:"text-4xl sm:text-5xl font-bold text-gray-900 mb-6",children:s.title}),s.excerpt&&e.jsx("p",{className:"text-xl text-gray-600 leading-relaxed",children:s.excerpt})]}),e.jsx("div",{className:"prose prose-lg max-w-none",children:s.content.split(`
`).map((t,l)=>t.trim()&&e.jsx("p",{className:"mb-6 text-gray-700 leading-relaxed",children:t},l))}),e.jsx("div",{className:"mt-12 pt-8 border-t",children:e.jsxs(r,{to:"/",className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 font-medium",children:[e.jsx(u,{className:"w-5 h-5"}),"Zurück zur Startseite"]})})]}),m.length>0&&e.jsx("section",{className:"bg-gray-50 py-16",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Weitere Artikel"}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:m.map(t=>e.jsxs(r,{to:`/artikel/${t.slug}`,className:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 hover:-translate-y-1 block",children:[t.image_url&&e.jsx("img",{src:t.image_url,alt:t.title,className:"w-full h-48 object-cover"}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 line-clamp-2",children:t.title}),t.excerpt&&e.jsx("p",{className:"text-gray-600 line-clamp-3",children:t.excerpt})]})]},t.id))})]})}),e.jsx(d,{})]})}export{E as default};
