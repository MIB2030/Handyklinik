import{s as c,j as e}from"./index-1W5Y0qyG.js";import{r as n}from"./react-vendor-CyQtAcHN.js";import{z as N,y as w,X as v,K as F,N as A}from"./icons-D7vnYvoJ.js";import"./supabase-BIynZPkb.js";function Q(){const[x,u]=n.useState([]),[d,g]=n.useState(null),[t,r]=n.useState({}),[p,o]=n.useState(!1),[h,a]=n.useState("");n.useEffect(()=>{i()},[]);const i=async()=>{const{data:s}=await c.from("faq_items").select("*").order("order_index");s&&u(s)},b=s=>{g(s.id),r(s)},m=()=>{g(null),r({})},f=async()=>{if(!d)return;const{error:s}=await c.from("faq_items").update(t).eq("id",d);s||(a("Erfolgreich gespeichert"),i(),m(),setTimeout(()=>a(""),3e3))},j=async()=>{const{error:s}=await c.from("faq_items").insert([{...t,order_index:x.length,is_active:!0}]);s||(a("FAQ hinzugefügt"),i(),o(!1),r({}),setTimeout(()=>a(""),3e3))},y=async s=>{if(!confirm("Möchten Sie diesen FAQ-Eintrag wirklich löschen?"))return;const{error:l}=await c.from("faq_items").delete().eq("id",s);l||(a("Erfolgreich gelöscht"),i(),setTimeout(()=>a(""),3e3))};return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"FAQ verwalten"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Häufig gestellte Fragen bearbeiten"})]}),e.jsxs("button",{onClick:()=>o(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(N,{className:"h-5 w-5"}),e.jsx("span",{children:"Hinzufügen"})]})]}),h&&e.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg text-green-800",children:h}),p&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Neue FAQ hinzufügen"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",placeholder:"Frage",value:t.question||"",onChange:s=>r({...t,question:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"}),e.jsx("textarea",{placeholder:"Antwort",value:t.answer||"",onChange:s=>r({...t,answer:s.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:j,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Speichern"}),e.jsx("button",{onClick:()=>{o(!1),r({})},className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400",children:"Abbrechen"})]})]})]}),e.jsx("div",{className:"space-y-4",children:x.map(s=>e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:d===s.id?e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",value:t.question||"",onChange:l=>r({...t,question:l.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"}),e.jsx("textarea",{value:t.answer||"",onChange:l=>r({...t,answer:l.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:f,className:"flex items-center space-x-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx("span",{children:"Speichern"})]}),e.jsxs("button",{onClick:m,className:"flex items-center space-x-2 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400",children:[e.jsx(v,{className:"h-4 w-4"}),e.jsx("span",{children:"Abbrechen"})]})]})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.question}),e.jsx("p",{className:"text-gray-600 mt-2",children:s.answer})]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsx("button",{onClick:()=>b(s),className:"text-blue-600 hover:text-blue-900",children:e.jsx(F,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>y(s.id),className:"text-red-600 hover:text-red-900",children:e.jsx(A,{className:"h-5 w-5"})})]})]})})},s.id))})]})}export{Q as default};
