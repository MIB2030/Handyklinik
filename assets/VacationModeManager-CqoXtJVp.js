import{s as d,j as e}from"./index-gTKCUqNh.js";import{r}from"./react-vendor-CyQtAcHN.js";import{a1 as p,e as h,b as j,y as v}from"./icons-uhig456p.js";import"./supabase-BIynZPkb.js";function k(){const[n,x]=r.useState(null),[g,b]=r.useState(!0),[c,o]=r.useState(!1),[l,i]=r.useState(""),[s,t]=r.useState({is_active:!1,start_date:"",end_date:"",message:"ðŸ–ï¸ Unsere Handyklinik ist im Urlaub! Unser Handyshop ist weiterhin normal geÃ¶ffnet.",show_banner:!0});r.useEffect(()=>{m()},[]);const m=async()=>{try{const{data:a,error:u}=await d.from("vacation_mode").select("*").order("created_at",{ascending:!1}).limit(1).maybeSingle();if(u)throw u;a&&(x(a),t({is_active:a.is_active,start_date:a.start_date,end_date:a.end_date,message:a.message,show_banner:a.show_banner}))}catch(a){console.error("Error loading vacation mode:",a),i("Fehler beim Laden der Urlaubs-Einstellungen")}finally{b(!1)}},f=async()=>{o(!0),i("");try{if(!s.start_date||!s.end_date)throw new Error("Bitte Start- und Enddatum ausfÃ¼llen");if(new Date(s.start_date)>new Date(s.end_date))throw new Error("Startdatum muss vor dem Enddatum liegen");if(n){const{error:a}=await d.from("vacation_mode").update({is_active:s.is_active,start_date:s.start_date,end_date:s.end_date,message:s.message,show_banner:s.show_banner}).eq("id",n.id);if(a)throw a}else{const{error:a}=await d.from("vacation_mode").insert([{is_active:s.is_active,start_date:s.start_date,end_date:s.end_date,message:s.message,show_banner:s.show_banner}]);if(a)throw a}i("âœ… Urlaubs-Einstellungen erfolgreich gespeichert!"),await m()}catch(a){console.error("Error saving vacation mode:",a),i(`âŒ Fehler: ${a.message}`)}finally{o(!1)}};return g?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-600",children:"Lade Urlaubs-Einstellungen..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Urlaubs-Modus"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Verwalten Sie Urlaubszeiten und Benachrichtigungen fÃ¼r Kunden"})]})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(p,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-900",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Wichtige Hinweise:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Kunden kÃ¶nnen wÃ¤hrend des Urlaubs weiterhin Anfragen senden"}),e.jsx("li",{children:"Der Banner wird auf allen Seiten angezeigt (wenn aktiviert)"}),e.jsx("li",{children:"Die Nachricht sollte erwÃ¤hnen, dass der Handyshop geÃ¶ffnet bleibt"}),e.jsx("li",{children:"Formulare zeigen automatisch einen Hinweis auf die Urlaubszeit"})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-6 border-b",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.is_active,onChange:a=>t({...s,is_active:a.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["Urlaubs-Modus ",s.is_active?"AKTIV":"INAKTIV"]}),e.jsx("p",{className:"text-sm text-gray-600",children:s.is_active?"ðŸ–ï¸ Urlaubs-Banner wird auf der Website angezeigt":"Banner ist derzeit ausgeblendet"})]})]})}),e.jsx("div",{className:`px-4 py-2 rounded-full text-sm font-semibold ${s.is_active?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800"}`,children:s.is_active?"IM URLAUB":"NORMAL GEÃ–FFNET"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[e.jsx(h,{className:"w-4 h-4 inline mr-1"}),"Urlaub von (Startdatum)"]}),e.jsx("input",{type:"date",value:s.start_date,onChange:a=>t({...s,start_date:a.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[e.jsx(h,{className:"w-4 h-4 inline mr-1"}),"Urlaub bis (Enddatum)"]}),e.jsx("input",{type:"date",value:s.end_date,onChange:a=>t({...s,end_date:a.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nachricht fÃ¼r Kunden"}),e.jsx("textarea",{value:s.message,onChange:a=>t({...s,message:a.target.value}),rows:4,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"z.B. ðŸ–ï¸ Unsere Handyklinik ist vom 15.12. bis 06.01. im Urlaub! Unser Handyshop ist weiterhin normal geÃ¶ffnet.",required:!0}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"ðŸ’¡ Tipp: Verwenden Sie Emojis wie ðŸ–ï¸ â˜€ï¸ ðŸŒ´ fÃ¼r mehr Aufmerksamkeit"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.show_banner,onChange:a=>t({...s,show_banner:a.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Banner auf der Website anzeigen"})]})}),s.is_active&&s.show_banner&&s.message&&e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Vorschau:"}),e.jsx("div",{className:"bg-gradient-to-r from-orange-400 to-amber-400 text-white px-6 py-4 rounded-lg shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(j,{className:"w-6 h-6 flex-shrink-0 animate-pulse"}),e.jsx("p",{className:"font-semibold",children:s.message})]})})]}),e.jsxs("div",{className:"flex items-center gap-4 pt-6 border-t",children:[e.jsxs("button",{onClick:f,disabled:c,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400",children:[e.jsx(v,{className:"w-4 h-4"}),c?"Speichere...":"Einstellungen speichern"]}),l&&e.jsx("p",{className:`text-sm font-semibold ${l.includes("âœ…")?"text-green-600":"text-red-600"}`,children:l})]})]})}),n&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 text-sm text-gray-600",children:e.jsxs("p",{children:["Zuletzt aktualisiert: ",new Date(n.updated_at).toLocaleString("de-DE")]})})]})}export{k as default};
